# Generation

The affective polarization algorithm is a network algorithm that modifies node attributes representing individual opinions. We begin, therefore, by generating a network. Specifically, we will be using the Erdős-Rényi model and the Barabási-Albert model. The latter provies us with a **scale-free random graph** to study the effects the scale-free property has on opinion dynamics, the former provides us a **uniform random graph** as a baseline for comparison.

If we wish to compare the influence that structure has on the behavior of our network, the two models should be otherwise similar. This includes the size (the number of edges) and order (the number of nodes), but in our case, it will also be important that both graphs will be connected. The polarization algorithm only applies to connected components. Therefore, disjoint subgraphs would essentially confuse the behavior of multiple small networks as a single large model. Measuring the dynamics of a a disconnected graph is as simple as aggregating the dynamics of its connected components. Therefore, our research will focus on connected graphs, and so it will be important during network generation to generate ER and BA networks that both connected.

The challenge, therefore, becomes, how do we generate both graphs such that they are same size, order and connectivity?

## The Erdős-Rényi Model

The Erdős-Rényi (ER) model was introduced by **Paul Erdös** and **Alfréd Rényi** in 1959. It provides a simple yet powerful framework for studying the properties of networks where edges form randomly between nodes. The ER model comes in two main variants: $G(n, m)$, where a graph is selected uniformly at random from the set of all graphs with $n$ nodes (i.e. order $n$) and exactly $m$ edges (i.e. size $m$), and $G(n, p)$, where each of the $\binom{n}{2}$ possible edges between $n$ nodes is included independently with probability $p$. The latter, $G(n, p)$, is perhaps the more commonly used formulation; however, because we need to maintain precise control of the size of our networks, we will be using the $G(n, m)$ model.

### Minimum Size

ER graphs are not always connected. The number of edges $m$ determines whether the graph is likely to be connected. Erdës and Rényi proved that, as the number of nodes $n$ increases towards infinity, the probability that the graph is connected undergoes a sharp transition at the **connectivity threshold**. Specifically,
$$
\lim_{n \to \infty} \mathbb{P}(G(n, m) \text{ is connected}) =
\begin{cases}
0 & \text{if } m < \displaystyle{\frac{n \ln n}{2}} \\
1 & \text{if } m > \displaystyle{\frac{n \ln n}{2}}
\end{cases}
$$
Therefore, our ER graphs will need to have *at least* $m=\displaystyle{\frac{n \ln n}{2}}$ number of edges in order to serve as a useful baseline for comparison with BA graphs. Remember that this is not a study of ER graphs generally. It is instead a baseline for comparison for the connected components of a BA graph of a given size and order. Therefore, a simple search for connected ER graphs of the same size and order will suffice. 

## The Barabási–Albert Model

The Barabási–Albert (BA) model was introduced by **Albert-László Barabási** and **Réka Albert** in 1999. Like the Erdős–Rényi model, BA networks are generated by specifying the number of nodes in the graph; however, unlike the ER model, which begins with $n$ isolated nodes and adds $m$ edges randomly, BA model begins with only $m$ nodes, and then grows the graph by adding $n-m$ additional nodes, each with $m$ new edges. Therefore, in the BA model, $m$ represents the number of new edges added per new node, rather than the total number of edges in the graph as in the ER model. The initial $m$ nodes are called the **seed** of teh BA graph. When a new node is added to the seed, the probability of attaching to an existing node is proportional to its degree. This process, called **preferential attachment**, produces a connected graph with a **power-law** (or "rich-get-richer") degree distribution:

$$p(k) \sim k^{-\gamma},\quad\mathbb{P}(2.5 \leq \gamma \leq 3) \approx 1$$

The scaling exponent $\gamma$ will be one of the most important measures for determining how network structure influences polarization.

The seed could be any graph on $m$ nodes. It is often a complete graph $K_m$. However, for this project, we use the NetworkX implementation of the BA model, which initializes the graph with $m$ *isolated* nodes. The first new node then adds $m$ edges, one for each of the isolated nodes, forming a connected graph on which preferential attachment can begin. If, for example, $m=3$ and $n>3$, then the initial graph will be 3 isolated nodes. Then the fourth node is added, the degree distribution will be $\{3, 1, 1, 1\}$, immediately giving us a degree distribution that appears to follow a power-law.

The total number of edges for a BA graph generated this way is $|E| = m(n-m)$, where $n$ is the number of nodes. The average degree is therefore

$$
\langle k \rangle = \frac{2|E|}{n} = 2m - \frac{2m^2}{n}.
$$

The average degree asymptotically approaches $2m$ as $n$ grows large:

$$
\lim_{n\to\infty} \left(2m - \frac{2m^2}{n}\right) = 2m.
$$

### Maximum Order

As $n$ increases relative to $m$, our BA graph becomes less dense, approaching zero. Therefore, it must eventually drop below the connectivity threshold for ER graphs. The question becomes: where do these two functions intersect for a given $m$?

$$m(n-m) \leq \frac{n \ln n}{2}$$

For this, let's begin by finding the points of intersection.

Note that the functions intersect at two points; however, our graphs will be significantly larger than the minimum threshold, so we will focus on the larger of the two numbers.

| $m$ | $n_1$ | $n_2$ |
|:---|:-----|:-----|
| 1 | 1.00000 | 4.92155 |
| 2 | 2.64141 | 45.8579 |
| 3 | 3.87469 | 385.001 |
| 4 | 5.00876 | 2948.78 |
| 5 | 6.10425 | 21976.4 |

Curve fitting the larger points of intersection strongly suggests that the maximum order of a BA graph that will have a sufficient number of edges for an ER graph of the same size and order to be connected follows closely (but not exactly) to a simple exponential function.
$$n\leq e^{2m}$$