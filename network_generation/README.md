# Generation

The affective polarization algorithm is a network algorithm that modifies node attributes representing individual opinions. We begin, therefore, by generating a network. Specifically, we will be using the Erdős-Rényi model and the Barabási-Albert model. The latter provies us with a **scale-free random graph** to study the effects the scale-free property has on opinion dynamics, the former provides us a **uniform random graph** as a baseline for comparison.

If we wish to compare the influence that structure has on the behavior of our network, the two models should be otherwise similar. This includes the size (the number of edges) and order (the number of nodes), but in our case, it will also be important that both graphs will be connected. The polarization algorithm only applies to connected components. Therefore, disjoint subgraphs would essentially confuse the behavior of multiple small networks as a single large model. Measuring the dynamics of a a disconnected graph is as simple as aggregating the dynamics of its connected components. Therefore, our research will focus on connected graphs, and so it will be important during network generation to generate ER and BA networks that both connected.

The challenge, therefore, becomes, how do we generate both graphs such that they are same size, order and connectivity?

## The Erdős-Rényi Model

The Erdős-Rényi (ER) model was introduced by **Paul Erdös** and **Alfréd Rényi** in 1959. It provides a simple yet powerful framework for studying the properties of networks where edges form randomly between nodes. The ER model comes in two main variants: $G(n, m)$, where a graph is selected uniformly at random from the set of all graphs with $n$ nodes (i.e. order $n$) and exactly $m$ edges (i.e. size $m$), and $G(n, p)$, where each of the $\binom{n}{2}$ possible edges between $n$ nodes is included independently with probability $p$. The latter, $G(n, p)$, is perhaps the more commonly used formulation; however, because we need to maintain precise control of the size of our networks, we will be using the $G(n, m)$ model.


## The Barabási–Albert Model

The Barabási–Albert (BA) model was introduced by **Albert-László Barabási** and **Réka Albert** in 1999. Like the Erdős–Rényi model, BA networks are generated by specifying the number of nodes in the graph; however, unlike the ER model, which begins with $n$ isolated nodes and adds $m$ edges randomly, BA model begins with only $m$ nodes, and then grows the graph by adding $n-m$ additional nodes, each with $m$ new edges. Therefore, in the BA model, $m$ represents the number of new edges added per new node, rather than the total number of edges in the graph as in the ER model. The initial $m$ nodes are called the **seed** of teh BA graph. When a new node is added to the seed, the probability of attaching to an existing node is proportional to its degree. This process, called **preferential attachment**, produces a connected graph with a **power-law** (or "rich-get-richer") degree distribution:

$$p(k) \sim k^{-\gamma},\quad\mathbb{P}(2.5 \leq \gamma \leq 3) \approx 1$$

The scaling exponent $\gamma$ will be one of the most important measures for determining how network structure influences polarization.

The seed could be any graph on $m$ nodes. It is often a complete graph $K_m$. However, for this project, we use the NetworkX implementation of the BA model, which initializes the graph with $m$ *isolated* nodes. The first new node then adds $m$ edges, one for each of the isolated nodes, forming a connected graph on which preferential attachment can begin. If, for example, $m=3$ and $n>3$, then the initial graph will be 3 isolated nodes. Then the fourth node is added, the degree distribution will be $\{3, 1, 1, 1\}$, immediately giving us a degree distribution that appears to follow a power-law.

The total number of edges for a BA graph generated this way is $|E| = m(n-m)$, where $n$ is the number of nodes. The average degree is therefore

$$
\langle k \rangle = \frac{2|E|}{n} = 2m - \frac{2m^2}{n}.
$$

The average degree asymptotically approaches $2m$ as $n$ grows large:

$$
\lim_{n\to\infty} \left(2m - \frac{2m^2}{n}\right) = 2m.
$$

## Scale-Free Networks

So far, we know that the order $n$ of our network should satisfy $m \leq n \leq e^{2m}$. This allows us to easily find connected Erdös-Renyí graphs of the same size and order of a given Barabási-Albert graph. However, the focus of this research is to study how structural properties (specifically, the scale-free property) of networks influence opinion dynamics.

A graph is said to have the scale-free property when its structure looks statistically similar at different scales of observation. In such graphs, a small number of nodes have very high degrees, acting as hubs, while the vast majority of nodes have relatively few connections. This uneven distribution of connections remains consistent even if one examines only a subset of the graph or zooms out to view the entire network.

The scale-free property is closely associated with degree distributions that follow a power law. Formally, a graph is said to exhibit a power-law degree distribution if the probability $P(k)$ that a randomly chosen node has degree $k$ satisfies $P(k) \sim k^{-\gamma}$ for some constant exponent $\gamma > 1$. This relationship implies that while most nodes have small degrees, a few nodes have very large degrees, and the probability of encountering a node of degree $k$ decays polynomially rather than exponentially. The scale-free property thus reflects the invariance of the degree distribution under rescaling, with the functional form $k^{-\gamma}$ preserved across different levels of observation.

The Barabási–Albert model is commonly used to study scale-free networks because it generates graphs whose degree distributions approximate a power law. As the network grows according to its attachment mechanism, the resulting structure exhibits the key feature of scale-free graphs: a small number of highly connected nodes alongside many nodes with few connections. The Barabási–Albert model thus provides a simple generative framework that reproduces the characteristic statistical self-similarity of scale-free degree distributions observed in many real-world networks.

While the Barabási–Albert model provides a convenient way to generate scale-free networks, our interest is not in the model itself, but in the structural properties of the networks it produces. We use the BA model as a tool to generate graphs that approximate real-world systems, particularly those exhibiting scale-free degree distributions. In particular, we focus on graphs where the degree distribution exponent $\gamma$ falls between 2.3 and 3.0, consistent with the range observed in many empirical studies of social networks. When $n$ is sufficiently large, the mean value of the power-law exponent $\gamma$ for Barabási–Albert graphs approaches 3. However, our $n$ is bounded above by $e^{2m}$ and may be significantly less than that. Therefore, it is important to determine what $\gamma$ values BA graphs will have within the range of $n$ that we will be working with.

So, now that we know the range of values for which it is possible for ER and BA graphs to be of the same size and order and also that the vast majority of ER graphs will be connected while the vast majority of BA graphs (which are always connected) will have $2.3\leq\gamma\leq 3.0$; we can easily generate such graphs.

Our `generate_networks` function takes the number of nodes $n$, calculates the smallest value of $m$ that will generate a number of edges in a BA above teh connectivity threshold for an ER graph, then generate those graphs, keeping only those that are connected (in the case of ER) with a $\gamma$ between 2.3 and 3.0 (in the case of BA). Alternatively, an $m$ can be specified and the boundaries for $\gamma$ can be adjusted.

A power-law distribution appears linear when plotted on logarithmic scales for both the x-axis and y-axis.

$$P(k) \sim k^{-\gamma} \longrightarrow \log P(k) \sim -\gamma \log k$$

As a result, the data points form a straight line on a log-log plot, with a slope equal to $-\gamma$, making it easy to visually identify power-law behavior. In the case of Barabási–Albert graphs, this implies that their degree distributions, when plotted on log-log axes, should display an approximately straight line, confirming the presence of scale-free structure.
